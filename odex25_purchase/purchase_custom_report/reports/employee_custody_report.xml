<odoo>
    <data>
        <template id="employee_custody_report_details">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page" size="A4">
                        <h3 style="text-align: center;">Employee Custody Report</h3>

                        <table style="width: 100%; margin-bottom: 15px;">
                            <tr>
                                <td style="font-weight: bold; width: 50%;">Date From :
                                    <span t-esc="date_from"/>
                                </td>
                                <td style="font-weight: bold; width: 50%;">Date To:
                                    <span t-esc="date_to"/>
                                </td>
                            </tr>
                        </table>

                        <t t-if="result_data">
                            <t t-foreach="result_data" t-as="group">
                                <t t-if="group['operations']">
                                    <table style="width: 100%; margin-bottom: 15px;">
                                        <tr>
                                            <td style="font-weight: bold;">Employee:
                                                <span t-esc="group['employee'].name"/>
                                            </td>
                                            <td style="font-weight: bold;">Department:
                                                <span t-esc="group['department'].name"/>
                                            </td>
                                        </tr>
                                    </table>
                                    <table class="table table-condensed table-bordered"
                                           style="width: 100%; page-break-inside: avoid; border: 2px solid black; border-collapse: collapse;">
                                        <thead>
                                            <tr>
                                                <th style="width: 20%;border: 1px solid black;">Source Document</th>
                                                <th style="width: 15%;border: 1px solid black;">Request Date</th>
                                                <th style="width: 15%;border: 1px solid black;">Asset</th>
                                                <th style="width: 10%;border: 1px solid black;">Custody Type</th>
                                                <th style="width: 10%;border: 1px solid black;">Custody Period</th>
                                                <th style="width: 15%;border: 1px solid black;">Assignment Date</th>
                                                <th style="width: 15%;border: 1px solid black;">Return Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="group['operations']" t-as="op">
                                                <tr>
                                                    <td style="border: 1px solid black;">
                                                        <span t-esc="op.purchase_request_id.name"/>
                                                    </td>
                                                    <td style="border: 1px solid black;">
                                                        <span t-esc="op.purchase_request_id.date"/>
                                                    </td>
                                                    <td style="border: 1px solid black;">
                                                        <span t-esc="op.asset_id.name or ''"/>
                                                    </td>
                                                    <td style="border: 1px solid black;">
                                                        <t t-set="label_type"
                                                           t-value="dict(op._fields['custody_type']._description_selection(op.env))"/>
                                                        <span t-esc="label_type.get(op.custody_type)"/>
                                                    </td>
                                                    <td style="border: 1px solid black;">
                                                        <t t-set="label_period"
                                                           t-value="dict(op._fields['custody_period']._description_selection(op.env))"/>
                                                        <span t-esc="label_period.get(op.custody_period)"/>
                                                    </td>
                                                    <td style="border: 1px solid black;">
                                                        <span t-esc="op.date or ''"/>
                                                    </td>
                                                    <td style="border: 1px solid black;">
                                                        <span t-esc="op.return_date or ''"/>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                    <br/>
                                </t>
                            </t>
                        </t>
                    </div>
                </t>
            </t>
        </template>
    </data>
</odoo>
